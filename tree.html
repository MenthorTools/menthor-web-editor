<select id="tree-view-button" data-width='140px' class="selectpicker">
	<option data-icon="glyphicon glyphicon-eye-open" value="package-hierarchy"> Package</option>
	<option data-icon="glyphicon glyphicon-eye-open" value="type-hierarchy"> Hierarchy</option>
	<option data-icon="glyphicon glyphicon-eye-open" value="type-composition"> Composition</option>
</select>

<script>
	/** install tree-view button */
	var thisDoc = document._currentScript.ownerDocument;
	var thatDoc = document;
    var content = thisDoc.querySelector('#tree-view-button');	 
	var cloned = thatDoc.importNode(content, true);
	thatDoc.querySelector('#menubar-container').appendChild(cloned);
</script>

<script>

$(function() {
	$('#tree-view').on('change', function(){
		var selected = $(this).find("option:selected").val();		
		loadJSTree(ADDR+"api/tree/"+selected)		
	});  
});

$('#jstree').bind("dblclick.jstree", function (event){
   var node = $(event.target).closest("li");
   var data = node.data("jstree");
   alert(node.attr('id'));
   
   //load details here
   //.....
   //.....
});

/** Load JS tree. Default view is set to package hierarchy */
function loadJSTree(url){
	$('#jstree').jstree("destroy");
    $('#jstree').jstree({
		'core' : { 
		  "multiple" : false,
		  'data' : {			
			"url" : url,
			"dataType" : "json",
		  }
		},
		"types": typeTreeConfig(),
		"plugins" : [ "types" ]
	})
}

/** type jstree config */
function typeTreeConfig(){
	return {
		"default" : {"icon" : ""},
		"class" : {"icon" : "/icon/type.png" },
		"package" : {"icon" : "/icon/package.png" },
		"datatype" : {"icon" : "/icon/type.png" },
		"type" : {"icon" : "/icon/type.png" },
		"meronymic" : {"icon" : "/icon/componentof.png" },
		"generalization" : {"icon" : "/icon/generalization.png" },
	}
}
</script>